---
layout: post
title: Project Dungeon&Fighter 1. 프로젝트 개요
date: 2024-10-20 12:00:00 +0900
category: Project_Dungeon&Fighter
---

## 1. 프로젝트 개요

1. [프로젝트 개요](#1-프로젝트-개요-1)
2. [프로젝트 로드맵](#2-프로젝트-로드맵)
  - [사전 준비 및 학습](#--사전-준비-및-학습-0907--1023)
  - [1주차](#--1주차-1024--1030)
  - [2주차](#--2주차-1031--1106)
  - [3주차](#--3주차-1107--1013)
  - [4주차](#--4주차-1114--1120)
3. [프로젝트 세부 개요](#3-프로젝트-세부-개요)

---

<br><br>

>### 1. 프로젝트 개요

<br>

|||
|---|---|
|프로젝트 이름|Dungeon&Fughter Win32API 모작 프로젝트|
|프로젝트 기간|2024.09.07 ~ 2024.11.20|
|개발환경 및 언어|C++|
||Win32API|
||Visual Studio 2022|
||자체 제작 엔진|
|프로젝트 참여자|김재영|

<br>

네오플에서 개발, 넥슨에서 서비스중인 벨트스크롤 액션 게임 "Dungeon&Fighter(던전앤파이터)"의 Win32API 기반 모작 프로젝트입니다.

원작 게임의 레기온 컨텐츠 "해방된 라르고"와 플레이어블 캐릭터 "트래블러", 일반 던전 및 UI의 구현을 목표로 하고있습니다.

---

<br><br>

>### 2. 프로젝트 로드맵

<br>

#### - 사전 준비 및 학습 (09.07 ~ 10.23)

> 자체 엔진 제작

> Texture & Animation 에디터



---

<br>

#### - 1주차 (10.24 ~ 10.30)

> Dungeon Maker & Stage 에디터

> 일반 몬스터

> NPC

> 포탈 및 장애물 오브젝트

> 플레이어 캐릭터 FSM

> HUD

> 커맨드


---

<br>

#### - 2주차 (10.31 ~ 11.06)

> 보스 스테이지

> 보스 몬스터 "해방된 라르고" 스킬

> 보스 몬스터 "해방된 라르고" FSM


---

<br>

#### - 3주차 (11.07 ~ 10.13)

> 플레이어 캐릭터 "트래블러" 스킬

> 스킬 HUD


---

<br>

#### - 4주차 (11.14 ~ 11.20)

> UI



---

<br><br>

>### 3. 프로젝트 세부 개요

1. 텍스처 에디터 및 애니메이션 에디터

본 프로젝트에서는 던전앤파이터에서 실제 사용되는 이미지 리소스 파일 형식인 NPK 파일을 직접 로드하여 사용하고, 애니메이션의 씬 정보 또는 텍스쳐 정보를 기록한
 .animation 파일을 작성하여 텍스처 리소스를 렌더링한다.


따라서 ARGB_1555, ARGB_4444, ARGB_8888 형식의 데이터를 이용하여 GDI+ 의 Bitmap 클래스로 관리해야 하며, ZLIB 라이브러리를 이용하여 압축된 데이터를 처리하고,
 DirectXTex 라이브러리를 이용하여 DDS 파일 포맷의 DXT1, DXT3, DXT5 압축 방식을 사용하는 텍스처 데이터를 처리하여 GDI+ Bitmap 클래스에 사용하도록 전환해야 한다.


또한, 보스 몬스터의 패턴 등에 이미지의 회전이 사용되므로 Graphics 객체를 사용하여 회전 처리를 함과 동시에 GDI+ 에 제공되지 않는 선형 닷지 렌더링 기법을 구현해야 한다.


자체 제작 리소스 또한 프로젝트 안에서 사용할 수 있도록 이미지 묶음을 NPK 파일로 출력하는 기능 또한 필요하다.


결론적으로, 다음과 같은 기능을 제공하는 것을 목표로 한다:
  - NPK 파일로부터 ARGB 및 DXT 형식의 이미지 데이터를 해독하여 GDI+ Bitmap 클래스로 관리.
  - 렌더링 옵션에 알파 블렌드, 선형 닷지, 회전 렌더링 기능 제공.
  - 이미지 파일로부터 NPK 파일 작성.


<br><br>


2. 던전 메이커 및 스테이지 메이커


인터페이스를 통해 사용자가 직접 던전과 스테이지를 제작할 수 있도록 하는 에디터를 목표로 한다.


\<던전 메이커\>


던전 메이커는 다수의 스테이지로 이루어진 던전을 제작, 편집할 수 있는 기능이다.


![alt text](../public/img/DungeonMaker.png)


위 사진과 같이, 그리드로 이루어진 공간에 스테이지 타일을 생성하여 던전을 만들 수 있다.


스테이지 편집을 선택하면 아래의 "스테이지 메이커" 기능으로 넘어가게 된다.


제작한 던전은 .dungeon 파일로 저장하거나 불러올 수 있으며, 이후 재차 편집할 수 있다.


기본적으로 스테이지의 배경 애니메이션, BGM, 스테이지 크기를 설정할 수 있으며, 스테이지 타일 배치 시 자동으로 주변 이어진 타일을 색출하여 양방향으로 이어지는
 게이트(포탈) 객체를 생성한다. 따라서, 스테이지 타일은 이어지는 구역에만 배치하도록 제한했다.


결론적으로, 다음과 같은 기능을 제공하는 것을 목표로 한다:
  - 그리드 공간에 스테이지 타일을 배치하여 스테이지 생성 가능 제공.
  - 스테이지 생성 시 BGM, 배경 애니메이션, 스테이지 크기를 지정할 수 있음.
  - 스테이지가 생성될 때 연결된 타일에 양방향으로 이어지는 게이트를 생성함.


<br>


\<스테이지 메이커\>


스테이지 메이커는 던전에 속하는 스테이지를 직접 편집할 수 있는 기능이다.


![alt text](../public/img/StageMaker.png)


위 사진과 같이, 추가적으로 스테이지 메이커용 조작 패널 다이얼로그가 제공되며, 이 다이얼로그 창을 통해 몬스터, NPC, 투명 벽의 추가, 선택한 오브젝트의 크기 및 위치 편집 또는
 오브젝트 삭제, 현재 스테이지의 크기 조정, 플레이어 활동 영역의 상한 제한선 조정이 가능하다.


또한 스테이지에 추가된 오브젝트는 마우스 조작을 통해 클릭으로 오브젝트를 선택하거나 드래그-드랍으로 위치를 조정할 수도 있다.


결론적으로, 다음과 같은 기능을 제공하는 것을 목표로 한다:
  - 몬스터, NPC, 투명 벽의 추가.
  - 선택한 오브젝트의 크기 및 위치 편집 또는 오브젝트 삭제.
  - 현재 스테이지의 크기 조정, 플레이어 활동 영역의 상한 제한선 조정.
  - 오브젝트 클릭을 통한 선택, 드래그-드롭으로 위치 조정.


<br><br>


3. 플레이어블 캐릭터 - 트래블러



<br><br>

4. 보스 몬스터 - 해방된 라르고



<br><br>

5. NPC, 일반 몬스터



---